<div>
	<confirm-dialog></confirm-dialog>
	<dataset-editor-dialog></dataset-editor-dialog>
	<button type="button" class="btn btn-primary" (click)="addOrEdit()">Add New DataSet</button>
	<div *ngIf="dataSets && dataSets.length">
		<table class="table table-striped table-hover table-interactive" contextmenu="contextmenu">
			<thead>
				<tr>
					<th></th>
					<th>Name</th>
					<th>Id Field</th>
					<th>Tag Field</th>
					<th>Interpreted Fields</th>
					<th>Document Count</th>
					<th>NGram Count</th>
					<th>Actions</th>
				</tr>
			</thead>
			<tbody *vsFor="dataSets; tagName:'tr'; scrollParent:'div'; excess: 2; autoresize:true; let _items = vsCollection; let _startIndex = vsStartIndex">
				<tr *ngFor="let dataSet of _items; let i= index" (click)="select(dataSet)" (dblclick)="gotoDocuments(dataSet)" [class.selected-row]="dataSet==selectedDataSet">
					<td>{{ i + _startIndex + 1}}</td>
					<td>{{ dataSet.Name }}</td>
					<td>{{ dataSet.IdField }}</td>
					<td>{{ dataSet.TagField }}</td>
					<td>{{ dataSet.InterpretedFields.join(", ") }}</td>
					<td>{{ dataSet.Statistics?.DocumentsCount }}</td>
					<td>{{ dataSet.NGramCount }}</td>
					<td>
						<button md-icon-button [md-menu-trigger-for]="menu">
                            <md-icon>more_vert</md-icon>
                        </button>
						<md-menu #menu="mdMenu" x-position="before">
							<button md-menu-item (click)="gotoDocuments(dataSet)">Open</button>
							<button md-menu-item (click)="cloneDataSet(dataSet)">Clone</button>
							<button md-menu-item (click)="addOrEdit(dataSet)">Rename</button>
							<button md-menu-item (click)="deleteConfirm(dataSet)">Delete</button>
						</md-menu>
					</td>
				</tr>
			</tbody>
		</table>
		<div *ngIf="selectedDataSet?.SampleDocument" class="label label-info">Sample Document</div>
		<div *ngIf="selectedDataSet?.Scheme" class="label label-default">Scheme</div>
		<textarea *ngIf="selectedDataSet" class="col-sm-12 sample-json" readonly>{{selectedDataSetJson()}}</textarea>
	</div>
</div>